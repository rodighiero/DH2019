!function(e){function t(t){for(var n,c,i=t[0],a=t[1],l=t[2],h=0,u=[];h<i.length;h++)c=i[h],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&u.push(s[c][0]),s[c]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(d&&d(t);u.length;)u.shift()();return r.push.apply(r,l||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,i=1;i<o.length;i++){var a=o[i];0!==s[a]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=o[0]))}return e}var n={},s={0:0},r=[];function c(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.m=e,c.c=n,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(o,n,function(t){return e[t]}.bind(null,n));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var i=window.webpackJsonp=window.webpackJsonp||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=a;r.push([4,1]),o()}([,function(e,t,o){e.exports=o.p+"nodes.json"},function(e,t,o){e.exports=o.p+"links.json"},function(e,t,o){},function(e,t,o){"use strict";o.r(t);o(3);var n=o(0);let r={distance:20,densityData:[],zoomState:null,zoomExtent:[.2,8],screen:{},colors:{backgroundLeft:n.rgb(255,144,104),backgroundRight:n.rgb(253,116,108),contours:n.rgb(251,158,129),keywords:n.rgb(100,79,39),nodes:n.rgb(39,72,100)},style:{fontNodes:"bold 2.5pt Helvetica"},setVariables:()=>{r.linkExtent=[r.links.reduce((e,t)=>{const o=Object.entries(t.tokens);for(const[t,n]of o)return e<n?e:n},1/0),r.links.reduce((e,t)=>{const o=Object.entries(t.tokens);for(const[t,n]of o)return e>n?e:n},0)],r.keywordScale=n.scaleLinear().domain(r.linkExtent).range([r.zoomExtent[1]+1,r.zoomExtent[0]-10]),r.fontScale=n.scaleLinear().domain(r.linkExtent).range([r.zoomExtent[0],r.zoomExtent[1]-10]),r.geoPath=n.geoPath().context(r.context)},setScreen:()=>{const e=document.querySelector("body");"devicePixelRatio"in window&&window.devicePixelRatio>1?(r.screen.density=window.devicePixelRatio,console.log("screen density:",r.screen.density)):r.screen.density=1,r.screen.width=e.clientWidth*r.screen.density,r.screen.height=e.clientHeight*r.screen.density,r.canvas=n.select("#visualization"),r.context=document.querySelector("#visualization").getContext("2d"),r.context.scale(r.screen.density,r.screen.density),r.canvas.style("width",`${e.clientWidth}px`).style("height",`${e.clientHeight}px`).attr("width",r.screen.width).attr("height",r.screen.height),n.select("#background").style("width",`${e.clientWidth}px`).style("height",`${e.clientHeight}px`).attr("width",r.screen.width).attr("height",r.screen.height);const t=document.querySelector("#background").getContext("2d",{alpha:!1}),o=t.createLinearGradient(0,0,r.screen.width/2,0);o.addColorStop(0,r.colors.backgroundLeft),o.addColorStop(1,r.colors.backgroundRight),t.fillStyle=o,t.fillRect(0,0,r.screen.width,r.screen.height)}};var c=()=>{r.end&&!r.densityData.length&&(()=>{const e=n.extent(r.nodes,e=>e.x),t=n.extent(r.nodes,e=>e.y),o=e[1]-e[0],s=t[1]-t[0],c=e[0],i=t[0];r.densityData=n.contourDensity().x(e=>e.x-c).y(e=>e.y-i).weight(e=>e.docs).size([o,s])(r.nodes),r.densityData.forEach(e=>e.coordinates=e.coordinates.map(e=>e.map(e=>e.map(e=>[e[0]+c,e[1]+i]))))})(),r.context.beginPath(),r.context.strokeStyle=r.colors.contours,r.densityData.forEach((e,t)=>{r.geoPath(e),r.context.lineWidth=.1+.15*t}),r.context.stroke()};var i=()=>{const e=s.zoomState.x*s.screen.density,t=s.zoomState.y*s.screen.density,o=s.zoomState.k;s.context.save(),s.context.clearRect(0,0,s.screen.width,s.screen.height),s.context.translate(e,t),s.context.scale(o,o),c(),(()=>{const e=Math.pow(r.distance,2),t=Math.pow(2*r.distance,2);let o=[];const n=e=>{let t=!1;return o.forEach(o=>{e[0]<o[0]+o[2]&&e[0]+e[2]>o[0]&&e[1]<o[1]+o[3]&&e[1]+e[3]>o[1]&&(t=!0)}),t};for(let s=0;s<r.links.length;s++){const c=r.links[s],i=Math.abs(c.source.x-c.target.x),a=Math.abs(c.source.y-c.target.y),l=Math.pow(i,2)+Math.pow(a,2);if(e<l&&l<t){const e=i/2+(c.source.x<c.target.x?c.source.x:c.target.x),t=a/2+(c.source.y<c.target.y?c.source.y:c.target.y),s=Object.entries(c.tokens).filter(e=>{const t=r.keywordScale(e[1]);return r.zoomState.k<=t&&t<=r.zoomState.k+2}).filter(o=>{const s=1.1*r.context.measureText(o[0]).width,c=1.5*r.context.measureText("M").width;return!n([e-s/2,t-c/2,s,c])}).slice(0,1);r.context.beginPath(),r.context.fillStyle=r.colors.keywords,r.context.textAlign="center",s.forEach(([n,s])=>{r.context.font=`normal 300 ${.1*s}pt Helvetica`,r.context.fillText(n,e,t);const c=1.1*r.context.measureText(n).width,i=1.5*r.context.measureText("M").width,a=[e-c/2,t-i/2,c,i];o.push(a)}),r.context.fill()}}})(),r.context.beginPath(),r.context.fillStyle=r.colors.nodes,r.context.font=r.style.fontNodes,r.context.textAlign="center",r.nodes.forEach(e=>{const t=e.id.split(", "),o=e.x,n=e.y;r.context.fillText(t[1],o,n-4),r.context.fillText(t[0],o,n),r.context.fillText(`(${e.docs})`,o,n+4)}),r.context.fill(),s.context.restore()};window.s=r,r.zoomState=n.zoomIdentity;var a=()=>{const e=n.forceSimulation().force("charge",n.forceManyBody().strength(-600)).force("collide",n.forceCollide().radius(r.distance).strength(.1)).force("center",n.forceCenter(r.screen.width/2,r.screen.height/2)).force("link",n.forceLink().id(e=>e.id).strength(e=>e.value));e.nodes(r.nodes),e.force("link").links(r.links);e.stop(),e.tick(100),r.end=!0,r.zoom=n.zoom().on("zoom",()=>{r.zoomState=n.event.transform,i()}),r.zoom.scaleExtent(r.zoomExtent),r.zoom.scaleTo(r.canvas,r.zoomExtent[0]),r.canvas.call(r.zoom),r.canvas.on("mousemove",()=>{const e=r.zoomState.invertX(event.x)*r.screen.density,t=r.zoomState.invertY(event.y)*r.screen.density;for(let o=r.nodes.length-1;o>=0;--o){const s=r.nodes[o],c=e-s.x,i=t-s.y;if(c*c+i*i<400){const e=Object.entries(s.tokens).reduce((e,t)=>(e.push(`${t[0]} (${t[1].toFixed(2)})`),e),[]);let t=`<p><strong>${s.id}</strong></p>`;t+=`<p>Number of papers: ${s.docs}</p>`,t+=`<p>Tokens:<br/>${e.join("<br/>")}</p>`,n.select("#focus").html(t)}}})},l=o(1),d=o.n(l),h=o(2),u=o.n(h);window.d3=n,window.s=r,Promise.all([n.json(d.a),n.json(u.a)]).then(([e,t])=>{r.links=t,r.nodes=e,r.setScreen(),r.setVariables(),console.log("nodes",r.nodes.length),console.log("links",r.links.length),a()}),n.select("#searchField").on("input",function(){const e=r.nodes.find(e=>-1!==e.id.toLowerCase().indexOf(this.value.toLowerCase()));n.select("#searchResults").html(""),n.select("#searchResults").append("p").text(`Press the key 'enter' to zoom to ${e.id}`),console.log("matching",e),r.zoomTo=e}).on("keypress",function(){if(32===n.event.keyCode||13===n.event.keyCode){const e=8,t=(r.screen.width/2-r.zoomTo.x*e)/r.screen.density,o=(r.screen.height/2-r.zoomTo.y*e)/r.screen.density;r.zoomState=n.zoomIdentity.translate(t,o).scale(e),r.canvas.transition().duration(2e3).call(r.zoom.transform,r.zoomState)}})}]);